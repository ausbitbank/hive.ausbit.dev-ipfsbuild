(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[21],{"06f7":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-page",{staticClass:"flex q-pa-md flex-center"},[void 0!==t.globalProps&&null!==t.globalProps?i("q-card",{staticClass:"text-center q-pa-sm q-ma-sm",attrs:{bordered:""}},[i("q-card-section",[i("div",{staticClass:"text-h5"},[i("q-icon",{attrs:{name:"img:statics/hbd.svg",title:"HBD",size:"md"}}),t._v("  HBD Stabilizer")],1),i("p",[i("router-link",{attrs:{to:"@hbdstabilizer"}},[t._v("@hbdstabilizer")]),t._v(" is a project by "),i("router-link",{attrs:{to:"@smooth"}},[t._v("@smooth")]),t._v(" that uses HBD from "),i("router-link",{attrs:{to:"@hive.fund"}},[t._v("@hive.fund")]),t._v(" to buy Hive & return it back to "),i("router-link",{attrs:{to:"@hive.fund"}},[t._v("@hive.fund")]),t._v(" whenever HBD is above its fair-value ($1 USD).")],1),i("div",{staticClass:"text-subtitle"},[i("router-link",{attrs:{to:"@smooth/posts"}},[i("q-icon",{attrs:{name:"info",color:"blue"}}),t._v("  Learn more from @smooth's posts")],1)],1)]),i("q-card-section",[i("div",{staticClass:"row"},[t.dao?i("q-card",{staticClass:"col",attrs:{flat:"",bordered:""}},[i("div",{staticClass:"text-h6"},[i("q-icon",{attrs:{name:"account_balance_wallet",color:"blue-grey"}}),t._v("  "),i("router-link",{attrs:{to:"@hive.fund"}},[t._v("hive.fund")])],1),i("div",{staticClass:"text-subtitle"},[t._v(t._s(t.tidyNumber(t.dao.balance.split(" ")[0]))+" "),i("q-icon",{attrs:{name:"img:statics/hive.svg",title:"HIVE"}}),i("br"),t._v("\n    "+t._s(t.tidyNumber(t.dao.hbd_balance.split(" ")[0]))+" "),i("q-icon",{attrs:{name:"img:statics/hbd.svg",title:"HBD"}}),i("br"),t._v("\n    "+t._s(t.vestToHive(parseFloat(t.dao.vesting_shares.split(" ")[0])))+" HP "),i("br"),t._v("\n    ~$ "+t._s(t.tidyNumber((t.hivePrice*parseFloat(t.dao.balance.split(" ")[0])+parseFloat(t.dao.hbd_balance.split(" ")[0])).toFixed(2))))],1)]):t._e(),t.hbdStabilizer?i("q-card",{staticClass:"col",attrs:{flat:"",bordered:""}},[i("div",{staticClass:"text-h6"},[i("q-icon",{attrs:{name:"account_balance_wallet",color:"blue-grey"}}),t._v("  "),i("router-link",{attrs:{to:"@hbdstabilizer"}},[t._v("hbdstabilizer")])],1),i("div",{staticClass:"text-subtitle"},[t._v(t._s(t.tidyNumber(t.hbdStabilizer.balance.split(" ")[0]))+" "),i("q-icon",{attrs:{name:"img:statics/hive.svg",title:"HIVE"}}),i("br"),t._v("\n    "+t._s(t.tidyNumber(t.hbdStabilizer.hbd_balance.split(" ")[0]))+" "),i("q-icon",{attrs:{name:"img:statics/hbd.svg",title:"HBD"}}),i("br"),t._v("\n    "+t._s(t.vestToHive(parseFloat(t.hbdStabilizer.vesting_shares.split(" ")[0])))+" HP "),i("br"),t._v("\n    ~$ "+t._s(t.tidyNumber((t.hivePrice*(parseFloat(t.hbdStabilizer.balance.split(" ")[0])+t.vestToHive(parseFloat(t.hbdStabilizer.vesting_shares.split(" ")[0])))+parseFloat(t.hbdStabilizer.hbd_balance.split(" ")[0])).toFixed(2))))],1),0!==parseInt(t.hbdStabilizer.vesting_withdraw_rate.split(" ")[0])?i("div",[i("div",[t._v("Next powerdown: "+t._s(t.tidyNumber(t.vestToHive(parseInt(t.hbdStabilizer.vesting_withdraw_rate.split(" ")[0]))))+" HIVE")]),i("div",{staticClass:"text-caption color-grey"},[t._v(t._s(t.timeDelta(t.hbdStabilizer.next_vesting_withdrawal)))])]):t._e()]):t._e(),t.hbdFunder?i("q-card",{staticClass:"col",attrs:{flat:"",bordered:""}},[i("div",{staticClass:"text-h6"},[i("q-icon",{attrs:{name:"account_balance_wallet",color:"blue-grey"}}),t._v("  "),i("router-link",{attrs:{to:"@hbd.funder"}},[t._v("hbd.funder")])],1),i("div",{staticClass:"text-subtitle"},[t._v(t._s(t.tidyNumber(t.hbdFunder.balance.split(" ")[0]))+" "),i("q-icon",{attrs:{name:"img:statics/hive.svg",title:"HIVE"}}),i("br"),t._v("\n    "+t._s(t.tidyNumber(t.hbdFunder.hbd_balance.split(" ")[0]))+" "),i("q-icon",{attrs:{name:"img:statics/hbd.svg",title:"HBD"}}),i("br"),t._v("\n    "+t._s(t.vestToHive(parseFloat(t.hbdFunder.vesting_shares.split(" ")[0])))+" HP "),i("br"),t._v("\n    ~$ "+t._s(t.tidyNumber((t.hivePrice*(parseFloat(t.hbdFunder.balance.split(" ")[0])+t.vestToHive(parseFloat(t.hbdFunder.vesting_shares.split(" ")[0])))+parseFloat(t.hbdFunder.hbd_balance.split(" ")[0])).toFixed(2))))],1),0!==parseInt(t.hbdFunder.vesting_withdraw_rate.split(" ")[0])?i("div",[i("div",[t._v("Next powerdown: "+t._s(t.tidyNumber(t.vestToHive(parseInt(t.hbdFunder.vesting_withdraw_rate.split(" ")[0]))))+" HIVE")]),i("div",{staticClass:"text-caption color-grey"},[t._v(t._s(t.timeDelta(t.hbdFunder.next_vesting_withdrawal)))])]):t._e()]):t._e()],1),t._v("\n    Estimated value based on Hive price of $"+t._s(t.hivePrice)+" and HBD price of $1\n    ")]),i("q-card-section",[i("div",{staticClass:"text-h6"},[t._v("Funding Proposals")]),t._l(t.proposals,(function(e){return i("div",{key:e.index},[t._v("\n        #"+t._s(e.proposal_id)+" - "),i("router-link",{attrs:{to:t.returnPostLink(e.creator,e.permlink)}},[t._v(t._s(e.subject))]),"active"===e.status?i("q-icon",{attrs:{name:"check",color:"green",title:"Proposal funding is active"}}):i("q-icon",{attrs:{name:"clear",color:"red",title:"Proposal funding is inactive"}}),t._v("\n        "+t._s(t.tidyNumber(e.daily_pay.amount/1e3))+" HBD per day"),i("br")],1)})),i("div",[t._v("Daily: "),i("strong",[t._v(t._s(t.tidyNumber(t.fundingBudgetDaoDaily)))]),t._v(" HBD")]),i("div",[t._v("Hourly: "),i("strong",[t._v(t._s(t.tidyNumber(t.fundingBudgetDaoDaily/24)))]),t._v(" HBD")])],2),t.openOrders.length>0?i("q-card-section",[i("div",{staticClass:"text-h6"},[t._v("Open Market Orders")]),t._l(t.openOrders,(function(e){return i("div",{key:e.index},[t._v("\n        "+t._s(e)+"\n      ")])}))],2):i("q-card-section",{staticClass:"text-subtitle"},[i("q-icon",{attrs:{name:"clear",color:"red"}}),t._v("  hbdstabilizer has no outstanding market orders\n    ")],1),t.hiveTransactions.length>0?i("q-card-section",[i("div",{staticClass:"text-h6"},[t._v("Recent transactions for "),i("router-link",{attrs:{to:"@hbdstabilizer"}},[t._v("hbdstabilizer")])],1),i("div",{staticClass:"subtitle"},[t._v("Only show: "),t._l(["transfer","proposal_pay","fill_order","limit_order_create","interest","convert","fill_convert_request"],(function(e){return i("q-badge",{key:e.index,staticClass:"q-mr-sm",attrs:{color:"blue-grey"}},[t._v(t._s(e))])})),i("router-link",{attrs:{to:"@hbdstabilizer?filter=transfer,fill_order,limit_order_create,interest,fill_convert_request,proposal_pay"}},[i("q-icon",{attrs:{name:"external_link"}})],1)],2),i("q-scroll-area",{staticStyle:{height:"400px","max-width":"100%"}},[i("q-list",{attrs:{separator:""}},[i("account-operations",{attrs:{"account-operations":t.hiveTransactions}})],1)],1)],1):t._e()],1):t._e()],1)},s=[],r=i("4db1"),n=i.n(r),o=i("fa84"),l=i.n(o),c=i("967e"),d=i.n(c),u=(i("28a5"),i("06db"),i("6b54"),i("a481"),i("2fdb"),i("6762"),i("1c16")),v=i("c1df"),b=i.n(v),h=i("be48"),_=i("d1f4"),p=_["ChainTypes"].operations,f=Object(_["makeBitMaskFilter"])([p.transfer,p.withdraw_vesting,p.interest,p.fill_convert_request,p.fill_order,p.limit_order_create,p.proposal_pay,p.convert]),m={name:"hbd",data:function(){return{medianPrice:null,daoHbdBalance:0,hbdStabilizer:null,hbdFunder:null,dao:null,openOrders:[],accountHistoryPointer:-1,accountHistoryLimit:100,hiveTransactions:[],bitmask:f,proposals:[]}},components:{accountOperations:h["a"]},computed:{globalProps:{get:function(){return this.$store.state.hive.globalProps}},fundingBudgetDaoDaily:function(){var t=0;return this.proposals.length>0?(this.proposals.forEach((function(e){"active"===e.status&&(t+=e.daily_pay.amount/1e3)})),t):0},hivePrice:function(){if(null!==this.medianPrice){var t=parseFloat(this.medianPrice.base.split(",")[0]),e=parseFloat(this.medianPrice.quote.split(",")[0]);return t/e}return 0}},methods:{tidyNumber:function(t){if(null==t)return null;var e=t.toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")},vestToHive:function(t){return this.globalProps?this.$hive.formatter.vestToHive(t,this.globalProps.total_vesting_shares,this.globalProps.total_vesting_fund_hive).toFixed(3):null},timeDelta:function(t){var e=b.a.utc(),i=b.a.utc(t),a=i.diff(e,"minutes");return b.a.duration(a,"minutes").humanize(!0)},getMedianPrice:function(){var t=this;this.$hive.api.getCurrentMedianHistoryPriceAsync().then((function(e){t.medianPrice=e})).catch((function(){console.log("Failed to get median price - retrying"),Object(u["a"])(t.getMedianPrice(),5e3)}))},getAccounts:function(){var t=this;this.$hive.api.getAccountsAsync(["hive.fund","hbdstabilizer","hbd.funder"]).then((function(e){t.dao=e[0],t.hbdStabilizer=e[1],t.hbdFunder=e[2]})).catch((function(){return console.log("Failed to load account data")}))},getOpenOrders:function(){var t=this;this.$hive.api.getOpenOrdersAsync("hbdstabilizer").then((function(e){t.openOrders=e}))},findProposals:function(t){var e=this,i={proposal_ids:t};this.$hive.api.callAsync("database_api.find_proposals",i).then((function(t){e.proposals=t.proposals}))},returnPostLink:function(t,e){return"@"+t+"/"+e},getHiveWalletTransactions:function(){var t=this;return l()(d.a.mark((function e(){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$hive.api.callAsync("call",["database_api","get_account_history",["hbdstabilizer",t.accountHistoryPointer,t.accountHistoryLimit].concat(n()(t.bitmask))]).then((function(e){t.accountHistoryPointer=parseInt(e[0][0])-1,0===t.hiveTransactions.length?t.hiveTransactions=e.reverse():t.hiveTransactions=t.hiveTransactions.concat(e.reverse())})).catch((function(e){console.log(e),e.data.stack[0].data.sequence&&e.cause.message.includes("Could not find filtered operation in")&&(t.accountHistoryPointer=e.data.stack[0].data.sequence,Object(u["a"])(t.getHiveWalletTransactions(),100))}));case 2:case"end":return e.stop()}}),e)})))()}},mounted:function(){document.title="HBDStabilizer Monitor",this.getAccounts(),this.getMedianPrice(),this.getOpenOrders(),this.getHiveWalletTransactions(),this.findProposals([158,159,166,169])},created:function(){this.$store.dispatch("hive/getGlobalProps")}},g=m,y=(i("d71a"),i("2877")),H=i("9989"),q=i("f09f"),P=i("a370"),w=i("0016"),x=i("58a8"),F=i("4983"),k=i("1c1c"),z=i("eebe"),C=i.n(z),D=Object(y["a"])(g,a,s,!1,null,"a6e3ac5a",null);e["default"]=D.exports;C()(D,"components",{QPage:H["a"],QCard:q["a"],QCardSection:P["a"],QIcon:w["a"],QBadge:x["a"],QScrollArea:F["a"],QList:k["a"]})},7513:function(t,e,i){},d71a:function(t,e,i){"use strict";var a=i("7513"),s=i.n(a);s.a}}]);