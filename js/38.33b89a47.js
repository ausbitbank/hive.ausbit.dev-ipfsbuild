(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[38],{ff9c:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"flex q-pa-md flex-center"},[a("q-card",{staticClass:"text-center",attrs:{flat:"",bordered:""}},[a("q-card-section",[a("h3",{staticClass:"text-center text-bold text-h5"},[e._v("Create new HIVE account")]),a("div",[a("i",[e._v("New accounts can be created by any user on the Hive network.")])]),a("div",[a("b",[e._v("If you're new here:")]),e._v(" use an onboarding service like "),a("a",{attrs:{href:"https://hiveonboard.com/?ref=ausbitbank"}},[e._v("hiveonboard")]),e._v(" ("),a("a",{attrs:{href:"https://signup.hive.io/"}},[e._v("or others")]),e._v(") to get started.")]),a("div",[a("b",[e._v("If you have an account already:")]),e._v(" you can directly create new accounts with the form below")])]),a("q-card-section",[a("q-card",{attrs:{flat:"",bordered:""}},[a("q-card-section",[!1===e.availableUsername||null===e.availableUsername?a("q-input",{attrs:{label:"New account username","bottom-slots":"","error-message":this.$hive.utils.validateAccountName(this.newUsername),error:null!==this.$hive.utils.validateAccountName(this.newUsername)},model:{value:e.newUsername,callback:function(t){e.newUsername=t},expression:"newUsername"}}):e._e(),!1===e.availableUsername?a("div",[a("q-icon",{attrs:{name:"error",color:"red",size:"md"}}),e._v(" Account "),a("router-link",{attrs:{to:e.linkAccount(e.newUsername)}},[e._v(e._s(e.newUsername))]),e._v(" is already registered")],1):e._e(),!0===e.availableUsername?a("div",{staticClass:"text-h5 text-center"},[a("b",[e._v(e._s(e.newUsername))]),e._v(" is available!"),a("br"),e.keys?a("q-btn",{attrs:{dense:"",icon:"refresh",color:"primary"},on:{click:function(t){e.checkUsernameAvailable(e.newUsername)&&e.init()}}}):e._e()],1):e._e()],1),a("q-separator"),a("q-card-actions",{staticClass:"text-center"},[!0===e.availableUsername?a("q-btn",{attrs:{flat:"",label:"Choose another username",icon:"arrow_back",color:"primary"},on:{click:function(t){e.newUsername="",e.keys=null,e.confirmedSaved=!1}}}):e._e(),e.availableUsername||e.keys?e._e():a("q-btn",{attrs:{flat:"",label:"Check username availability",icon:"search",color:"primary"},on:{click:function(t){e.keys=null,e.checkUsernameAvailable(e.newUsername)}}}),e.availableUsername&&!e.keys?a("q-btn",{attrs:{flat:"",label:"Generate Keys",icon:"enhanced_encryption",color:"orange"},on:{click:function(t){return e.genKeys()}}}):e._e()],1)],1),e.keys?a("q-card",{attrs:{flat:"",bordered:""}},[a("q-card-section",{staticClass:"text-center text-h5 text-bold text-red",attrs:{header:""}},[a("q-icon",{attrs:{name:"warning"}}),e._v(" Save a copy of these keys!\n      ")],1),a("q-card-section",[a("json-viewer",{attrs:{data:e.keys}}),a("q-checkbox",{attrs:{label:"I have saved my keys in a secure location"},model:{value:e.confirmedSaved,callback:function(t){e.confirmedSaved=t},expression:"confirmedSaved"}})],1),a("q-card-actions",{staticClass:"text-center"},[a("q-btn",{attrs:{dense:"",color:"primary",icon:"content_copy",label:"Copy keys"},on:{click:function(t){e.copy(JSON.stringify(e.keys))}}}),a("q-btn",{attrs:{dense:"",color:"primary",icon:"save",label:"Save keys"},on:{click:function(t){return e.saveKeys()}}}),a("q-btn",{attrs:{dense:"",color:"red",icon:"person_add",label:"Create account",title:e.loggedInUser?"Broadcast account creation to blockchain":"You need to login to use this",disable:!e.loggedInUser||0===e.account.pending_claimed_accounts||!e.confirmedSaved},on:{click:function(t){return e.claimAccount()}}}),a("q-btn",{attrs:{dense:"",label:"Import keys to keychain",color:"primary",icon:"img:statics/hive-keychain.svg"},on:{click:function(t){return e.importToKeychain()}}})],1)],1):e._e()],1),e.loggedInUser&&e.account&&e.account.pending_claimed_accounts?a("q-card-section",[e._v("\n      "+e._s(e.loggedInUser)+" has "),a("q-badge",{attrs:{color:"primary"}},[e._v(e._s(e.account.pending_claimed_accounts))]),e._v(" account creation tokens available\n    ")],1):e._e()],1)],1)},s=[],i=a("fa84"),o=a.n(i),r=a("967e"),c=a.n(r),l=(a("06db"),a("cadf"),a("ac6a"),a("cdde")),u=a("a357"),h=a("8e27"),d={name:"createAccountPage",components:{jsonViewer:function(){return Promise.all([a.e(0),a.e(1)]).then(a.bind(null,"a00c"))}},data:function(){return{newUsername:"",availableUsername:null,keys:null,roles:["active","owner","posting","memo"],confirmedSaved:!1}},watch:{newUsername:function(){this.availableUsername=null},loggedInUser:function(){this.availableUsername=null}},computed:{globalProps:function(){return this.$store.state.hive.globalProps},loggedInUser:function(){return this.$store.state.hive.user.username},account:function(){return this.$store.state.hive.accounts[this.loggedInUser]||null}},methods:{checkUsernameAvailable:function(e){var t=this;this.availableUsername=null,this.$hive.api.getAccountsAsync([e]).then((function(e){0===e.length?t.availableUsername=!0:t.availableUsername=!1})).error((function(e){t.availableUsername=null,t.console.error(e.cause.data)}))},genKeys:function(){var e=this.$hive.formatter.createSuggestedPassword();this.keys={username:this.newUsername,password:e},this.keys.owner=this.$hive.auth.toWif(this.newUsername,e,"owner"),this.keys.active=this.$hive.auth.toWif(this.newUsername,e,"active"),this.keys.posting=this.$hive.auth.toWif(this.newUsername,e,"posting"),this.keys.memo=this.$hive.auth.toWif(this.newUsername,e,"memo")},copy:function(e){Object(l["a"])(e),this.$q.notify("Copied keys to clipboard")},linkAccount:function(e){return"/@"+e},claimAccount:function(){var e={creator:this.loggedInUser,new_account_name:this.newUsername,owner:{weight_threshold:1,account_auths:[],key_auths:[[this.$hive.auth.wifToPublic(this.keys.owner),1]]},active:{weight_threshold:1,account_auths:[],key_auths:[[this.$hive.auth.wifToPublic(this.keys.active),1]]},posting:{weight_threshold:1,account_auths:[],key_auths:[[this.$hive.auth.wifToPublic(this.keys.posting),1]]},memo_key:this.$hive.auth.wifToPublic(this.keys.memo),json_metadata:"",extensions:[]},t=["create_claimed_account",e];this.$store.commit("hive/addToQueue",[this.loggedInUser,"active",t])},importToKeychain:function(){var e=this;return o()(c.a.mark((function t(){var a,n,s;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(h["keychain"])(window,"requestAddAccount",e.keys.username,{active:e.keys.active,posting:e.keys.posting,memo:e.keys.memo});case 2:a=t.sent,n=a.success,s=a.msg,n&&e.$q.notify("Imported active, posting & memo keys to hive-keychain"),s&&e.$q.notify(s);case 7:case"end":return t.stop()}}),t)})))()},saveKeys:function(){if(this.keys){var e=Object(u["a"])(this.keys.username+"-HiveKeys.txt",this.keys);!0===e?this.$q.notify("Downloaded "+this.keys.username+"-HiveKeys.txt"):this.$q.notify(Error+":"+e)}},init:function(){this.loggedInUser&&void 0===this.account&&this.$store.dispatch("hive/getAccount",this.loggedInUser)}},mounted:function(){document.title="Create new Hive account"}},m=d,v=a("2877"),b=a("9989"),f=a("f09f"),y=a("a370"),k=a("27f9"),g=a("0016"),w=a("9c40"),p=a("eb85"),_=a("4b7e"),U=a("8f8e"),q=a("58a8"),x=a("eebe"),$=a.n(x),I=Object(v["a"])(m,n,s,!1,null,null,null);t["default"]=I.exports;$()(I,"components",{QPage:b["a"],QCard:f["a"],QCardSection:y["a"],QInput:k["a"],QIcon:g["a"],QBtn:w["a"],QSeparator:p["a"],QCardActions:_["a"],QCheckbox:U["a"],QBadge:q["a"]})}}]);