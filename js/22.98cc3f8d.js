(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[22],{"06f7":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"flex q-pa-md flex-center"},[void 0!==t.globalProps&&null!==t.globalProps?a("q-card",{staticClass:"text-center q-pa-sm q-ma-sm",attrs:{bordered:""}},[a("q-card-section",[a("div",{staticClass:"text-h5"},[a("q-icon",{attrs:{name:"img:statics/hbd.svg",title:"HBD",size:"md"}}),t._v("  HBD Stabilizer")],1),a("p",[a("router-link",{attrs:{to:"@hbdstabilizer"}},[t._v("@hbdstabilizer")]),t._v(" is a project by "),a("router-link",{attrs:{to:"@smooth"}},[t._v("@smooth")]),t._v(" that uses HBD from "),a("router-link",{attrs:{to:"@hive.fund"}},[t._v("@hive.fund")]),t._v(" to buy Hive & return it back to "),a("router-link",{attrs:{to:"@hive.fund"}},[t._v("@hive.fund")]),t._v(" whenever HBD is above its fair-value ($1 USD).")],1),a("div",{staticClass:"text-subtitle"},[a("router-link",{attrs:{to:"@smooth/posts"}},[a("q-icon",{attrs:{name:"info",color:"blue"}}),t._v("  Learn more from @smooth's posts")],1)],1)]),a("q-card-section",[a("div",{staticClass:"row"},[t.dao?a("q-card",{staticClass:"col",attrs:{flat:"",bordered:""}},[a("div",{staticClass:"text-h6"},[a("q-icon",{attrs:{name:"account_balance_wallet",color:"blue-grey"}}),t._v("  "),a("router-link",{attrs:{to:"@hive.fund"}},[t._v("hive.fund")])],1),a("div",{staticClass:"text-subtitle"},[a("animInt",{staticClass:"q-mr-sm",attrs:{value:t.dao.balance.split(" ")[0]}}),a("q-icon",{attrs:{name:"img:statics/hive.svg",title:"HIVE"}}),a("br"),a("animInt",{staticClass:"q-mr-sm",attrs:{value:t.dao.hbd_balance.split(" ")[0]}}),a("q-icon",{attrs:{name:"img:statics/hbd.svg",title:"HBD"}}),a("br"),a("animInt",{attrs:{value:t.vestToHive(parseFloat(t.dao.vesting_shares.split(" ")[0]))}}),t._v(" HP "),a("br"),t._v("\n    ~$ "),a("animInt",{attrs:{value:(t.hivePrice*parseFloat(t.dao.balance.split(" ")[0])+parseFloat(t.dao.hbd_balance.split(" ")[0])).toFixed(2)}})],1)]):t._e(),t.hbdStabilizer?a("q-card",{staticClass:"col",attrs:{flat:"",bordered:""}},[a("div",{staticClass:"text-h6"},[a("q-icon",{attrs:{name:"account_balance_wallet",color:"blue-grey"}}),t._v("  "),a("router-link",{attrs:{to:"@hbdstabilizer"}},[t._v("hbdstabilizer")])],1),a("div",{staticClass:"text-subtitle"},[a("animInt",{staticClass:"q-mr-sm",attrs:{value:t.hbdStabilizer.balance.split(" ")[0]}}),a("q-icon",{attrs:{name:"img:statics/hive.svg",title:"HIVE"}}),a("br"),a("animInt",{staticClass:"q-mr-sm",attrs:{value:t.hbdStabilizer.hbd_balance.split(" ")[0]}}),a("q-icon",{attrs:{name:"img:statics/hbd.svg",title:"HBD"}}),a("br"),a("animInt",{attrs:{value:t.vestToHive(parseFloat(t.hbdStabilizer.vesting_shares.split(" ")[0]))}}),t._v(" HP "),a("br"),t._v("\n    ~$ "),a("animInt",{attrs:{value:(t.hivePrice*parseFloat(t.hbdStabilizer.balance.split(" ")[0])+parseFloat(t.hbdStabilizer.hbd_balance.split(" ")[0])).toFixed(2)}})],1),0!==parseInt(t.hbdStabilizer.vesting_withdraw_rate.split(" ")[0])?a("div",[a("div",[t._v("Next powerdown: "+t._s(t.tidyNumber(t.vestToHive(parseInt(t.hbdStabilizer.vesting_withdraw_rate.split(" ")[0]))))+" HIVE")]),a("div",{staticClass:"text-caption color-grey"},[t._v(t._s(t.timeDelta(t.hbdStabilizer.next_vesting_withdrawal)))])]):t._e()]):t._e(),t.hbdFunder?a("q-card",{staticClass:"col",attrs:{flat:"",bordered:""}},[a("div",{staticClass:"text-h6"},[a("q-icon",{attrs:{name:"account_balance_wallet",color:"blue-grey"}}),t._v("  "),a("router-link",{attrs:{to:"@hbd.funder"}},[t._v("hbd.funder")])],1),a("div",{staticClass:"text-subtitle"},[a("animInt",{staticClass:"q-mr-sm",attrs:{value:t.hbdFunder.balance.split(" ")[0]}}),a("q-icon",{attrs:{name:"img:statics/hive.svg",title:"HIVE"}}),a("br"),a("animInt",{staticClass:"q-mr-sm",attrs:{value:t.hbdFunder.hbd_balance.split(" ")[0]}}),a("q-icon",{attrs:{name:"img:statics/hbd.svg",title:"HBD"}}),a("br"),a("animInt",{attrs:{value:t.vestToHive(parseFloat(t.hbdFunder.vesting_shares.split(" ")[0]))}}),t._v(" HP "),a("br"),t._v("\n    ~$ "),a("animInt",{attrs:{value:(t.hivePrice*parseFloat(t.hbdFunder.balance.split(" ")[0])+parseFloat(t.hbdFunder.hbd_balance.split(" ")[0])).toFixed(2)}})],1),0!==parseInt(t.hbdFunder.vesting_withdraw_rate.split(" ")[0])?a("div",[a("div",[t._v("Unstaking: "+t._s(t.tidyNumber(t.vestToHive(parseInt(t.hbdFunder.vesting_withdraw_rate.split(" ")[0]))))+" HIVE")]),a("div",{staticClass:"text-caption color-grey"},[t._v(t._s(t.timeDelta(t.hbdFunder.next_vesting_withdrawal)))])]):t._e()]):t._e()],1),t._v("\n    Estimated value based on Hive price of $"+t._s(t.hivePrice)+" and HBD price of $1\n    ")]),a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Funding Proposals")]),t._l(t.proposals,(function(e){return a("div",{key:e.index},[t._v("\n        #"+t._s(e.proposal_id)+" - "),a("router-link",{attrs:{to:t.returnPostLink(e.creator,e.permlink)}},[t._v(t._s(e.subject))]),"active"===e.status?a("q-icon",{attrs:{name:"check",color:"green",title:"Proposal funding is active"}}):a("q-icon",{attrs:{name:"clear",color:"red",title:"Proposal funding is inactive"}}),t._v("\n        "+t._s(t.tidyNumber(e.daily_pay.amount/1e3))+" HBD per day"),a("br")],1)})),a("div",[t._v("Daily: "),a("strong",[t._v(t._s(t.tidyNumber(t.fundingBudgetDaoDaily)))]),t._v(" HBD")]),a("div",[t._v("Hourly: "),a("strong",[t._v(t._s(t.tidyNumber(t.fundingBudgetDaoDaily/24)))]),t._v(" HBD")])],2),t.openOrders.length>0?a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Open Market Orders")]),t._l(t.openOrders,(function(e){return a("div",{key:e.index},[t._v("\n        "+t._s(e)+"\n      ")])}))],2):a("q-card-section",{staticClass:"text-subtitle"},[a("q-icon",{attrs:{name:"clear",color:"red"}}),t._v("  hbdstabilizer has no outstanding market orders\n    ")],1),t.hiveTransactions.length>0?a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Recent transactions for "),a("router-link",{attrs:{to:"@hbdstabilizer"}},[t._v("hbdstabilizer")])],1),a("div",{staticClass:"subtitle"},[t._v("Only show: "),t._l(["transfer","proposal_pay","fill_order","limit_order_create","interest","convert","fill_convert_request"],(function(e){return a("q-badge",{key:e.index,staticClass:"q-mr-sm",attrs:{color:"blue-grey"}},[t._v(t._s(e))])})),a("router-link",{attrs:{to:"@hbdstabilizer?filter=transfer,fill_order,limit_order_create,interest,fill_convert_request,proposal_pay"}},[a("q-icon",{attrs:{name:"external_link"}})],1)],2),a("q-scroll-area",{staticStyle:{height:"400px","max-width":"100%"}},[a("q-list",{attrs:{separator:""}},[a("account-operations",{attrs:{"account-operations":t.hiveTransactions}})],1)],1)],1):t._e()],1):t._e()],1)},s=[],r=a("4db1"),n=a.n(r),o=a("fa84"),l=a.n(o),c=a("967e"),d=a.n(c),u=(a("28a5"),a("06db"),a("6b54"),a("a481"),a("2fdb"),a("6762"),a("1c16")),v=a("c1df"),h=a.n(v),b=a("f062"),p=a("4f22"),_=a("be48"),m=a("d1f4"),f=m["ChainTypes"].operations,g=Object(m["makeBitMaskFilter"])([f.transfer,f.withdraw_vesting,f.interest,f.fill_convert_request,f.fill_order,f.limit_order_create,f.proposal_pay,f.convert]),y={name:"hbd",data:function(){return{medianPrice:null,daoHbdBalance:0,hbdStabilizer:null,hbdFunder:null,dao:null,openOrders:[],accountHistoryPointer:-1,accountHistoryLimit:100,hiveTransactions:[],bitmask:g,proposals:[]}},components:{accountOperations:_["a"],animInt:b["default"]},mixins:[p["a"]],timers:{refresh:{time:6e4,autostart:!0,repeat:!0,immediate:!0,isSwitchTab:!1}},computed:{globalProps:{get:function(){return this.$store.state.hive.globalProps}},fundingBudgetDaoDaily:function(){var t=0;return this.proposals.length>0?(this.proposals.forEach((function(e){"active"===e.status&&(t+=e.daily_pay.amount/1e3)})),t):0},hivePrice:function(){if(null!==this.medianPrice){var t=parseFloat(this.medianPrice.base.split(",")[0]),e=parseFloat(this.medianPrice.quote.split(",")[0]);return t/e}return 0}},methods:{tidyNumber:function(t){if(null==t)return null;var e=t.toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")},vestToHive:function(t){return this.globalProps?this.$hive.formatter.vestToHive(t,this.globalProps.total_vesting_shares,this.globalProps.total_vesting_fund_hive).toFixed(3):null},timeDelta:function(t){var e=h.a.utc(),a=h.a.utc(t),i=a.diff(e,"minutes");return h.a.duration(i,"minutes").humanize(!0)},getMedianPrice:function(){var t=this;this.$hive.api.getCurrentMedianHistoryPriceAsync().then((function(e){t.medianPrice=e})).catch((function(){console.log("Failed to get median price - retrying"),Object(u["a"])(t.getMedianPrice(),5e3)}))},getAccounts:function(){var t=this;this.$hive.api.getAccountsAsync(["hive.fund","hbdstabilizer","hbd.funder"]).then((function(e){t.dao=e[0],t.hbdStabilizer=e[1],t.hbdFunder=e[2]})).catch((function(){return console.log("Failed to load account data")}))},getOpenOrders:function(){var t=this;this.$hive.api.getOpenOrdersAsync("hbdstabilizer").then((function(e){t.openOrders=e}))},findProposals:function(t){var e=this,a={proposal_ids:t};this.$hive.api.callAsync("database_api.find_proposals",a).then((function(t){e.proposals=t.proposals}))},returnPostLink:function(t,e){return"@"+t+"/"+e},refresh:function(){this.getAccounts(),this.getOpenOrders(),this.getHiveWalletTransactions()},getHiveWalletTransactions:function(){var t=this;return l()(d.a.mark((function e(){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$hive.api.callAsync("call",["condenser_api","get_account_history",["hbdstabilizer",t.accountHistoryPointer,t.accountHistoryLimit].concat(n()(t.bitmask))]).then((function(e){t.accountHistoryPointer=parseInt(e[0][0])-1,0===t.hiveTransactions.length?t.hiveTransactions=e.reverse():t.hiveTransactions=t.hiveTransactions.concat(e.reverse())})).catch((function(e){console.log(e),e.data.stack[0].data.sequence&&e.cause.message.includes("Could not find filtered operation in")&&(t.accountHistoryPointer=e.data.stack[0].data.sequence,Object(u["a"])(t.getHiveWalletTransactions(),100))}));case 2:case"end":return e.stop()}}),e)})))()}},mounted:function(){document.title="HBDStabilizer Monitor",this.getMedianPrice(),this.findProposals([158,159,166,169,191,213])},created:function(){this.$store.dispatch("hive/getGlobalProps")}},q=y,H=(a("2ce1"),a("2877")),P=a("9989"),x=a("f09f"),w=a("a370"),C=a("0016"),k=a("58a8"),F=a("4983"),z=a("1c1c"),I=a("eebe"),D=a.n(I),B=Object(H["a"])(q,i,s,!1,null,"3ee86c1f",null);e["default"]=B.exports;D()(B,"components",{QPage:P["a"],QCard:x["a"],QCardSection:w["a"],QIcon:C["a"],QBadge:k["a"],QScrollArea:F["a"],QList:z["a"]})},"2ce1":function(t,e,a){"use strict";var i=a("74bc"),s=a.n(i);s.a},"74bc":function(t,e,a){}}]);