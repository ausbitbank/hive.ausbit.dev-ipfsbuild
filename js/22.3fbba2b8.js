(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[22],{"3d4c":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return void 0!==e.account?a("q-card",{staticStyle:{"min-width":"100px","max-width":"95%"},attrs:{flat:"",bordered:""}},[a("q-card-section",{staticClass:"text-h5 text-center text-bold",attrs:{header:""}},[e._v("\n    Delegate "+e._s(e.tokenName)+"\n  ")]),"hive"===this.network&"HIVE"===this.tokenName?a("q-card-section",{staticClass:"text-center"},[a("div",[e._v("You currently have "),a("b",{staticClass:"text-primary cursor-pointer",on:{click:function(t){e.amountVests=parseFloat(e.availableStake)}}},[e._v(e._s(e.tidyNumber(e.vestToHive(e.availableStake))))]),e._v(" "+e._s(e.tokenName)+" available for delegating.")])]):e._e(),a("q-card-section",[a("q-input",{staticStyle:{"max-width":"250px",margin:"auto"},attrs:{label:"Account to delegate to"},model:{value:e.to,callback:function(t){e.to=t},expression:"to"}}),e.alreadyDelegatedToUser?a("q-card",{staticClass:"q-ma-sm q-pa-sm",staticStyle:{margin:"auto"},attrs:{flat:"",bordered:""}},[e._v("\n        Currently delegating "),a("b",{staticClass:"text-primary cursor-pointer",on:{click:function(t){e.amountVests=e.alreadyDelegatedToUser}}},[e._v(e._s(e.tidyNumber(e.vestToHive(e.alreadyDelegatedToUser))))]),e._v(" "+e._s(e.tokenName)+" to "+e._s(e.to)+" since "+e._s(e.timeDelta(e.alreadyDelegatedToUserDate))),a("br"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel Delegation",icon:"cancel",color:"red"},on:{click:function(t){e.amountVests=0,e.delegateHive()}}})],1):e._e(),a("q-slider",{staticStyle:{"max-width":"350px",margin:"auto"},attrs:{label:"","label-value":"Hive: "+e.amountHive,markers:"",min:0,max:e.availableStake},model:{value:e.amountVests,callback:function(t){e.amountVests=t},expression:"amountVests"}}),a("q-input",{staticStyle:{"max-width":"250px",margin:"auto"},attrs:{label:"Delegation amount (VESTS)"},model:{value:e.amountVests,callback:function(t){e.amountVests=e._n(t)},expression:"amountVests"}}),a("q-input",{staticStyle:{"max-width":"250px",margin:"auto"},attrs:{readonly:"",label:"Delegation amount (HIVE)"},model:{value:e.amountHive,callback:function(t){e.amountHive=e._n(t)},expression:"amountHive"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",disable:e.delegationButtonDisabled,label:e.delegationButtonLabel,color:e.delegationButtonColor},on:{click:function(t){return e.delegateHive()}}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Close without changes",color:"primary"}})],1)],1):e._e()},i=[],s=(a("a481"),a("6b54"),a("06db"),a("7514"),a("28a5"),a("c5f6"),a("c1df")),o=a.n(s),r={name:"delegationDialog",data:function(){return{amountVests:this.amountVestsSuggest,memo:"",err:!1,log:"",sent:!1,to:this.toModify}},props:{tokenName:{type:String,required:!0,default:"HIVE"},network:{type:String,required:!1,default:"hive"},username:{type:String,required:!0},toModify:{type:String,required:!1,default:""},precision:{type:Number,required:!1,default:3},delegations:{type:Array,required:!1,default:function(){return[]}},amountVestsSuggest:{type:Number,required:!1,default:0}},components:{},computed:{delegationButtonLabel:function(){return this.alreadyDelegatedToUser?"Update Delegation":"New Delegation"},delegationButtonColor:function(){return this.alreadyDelegatedToUser?"red":"green"},delegationButtonDisabled:function(){return""===this.to||this.to.length<3},availableStake:function(){if("hive"===this.network&"HIVE"===this.tokenName){var e=parseFloat(this.$store.state.hive.accounts[this.username].vesting_shares.split(" ")[0]),t=parseFloat(this.$store.state.hive.accounts[this.username].delegated_vesting_shares.split(" ")[0]);return e-t}return null},alreadyDelegatedToUser:function(){var e=this;if(""!==this.to&&this.delegations.length>0){var t=this.delegations.find((function(t){return t.delegatee===e.to}));return void 0!==t?parseFloat(t.vesting_shares.split(" ")[0]):null}return null},alreadyDelegatedToUserDate:function(){var e=this;if(""!==this.to&&this.delegations.length>0){var t=this.delegations.find((function(t){return t.delegatee===e.to}));return void 0!==t?t.min_delegation_time:null}return null},account:function(){return this.$store.state.hive.accounts[this.username]},loggedInUser:function(){return this.$store.state.hive.user.username},globalProps:function(){return this.$store.state.hive.globalProps},amountHive:function(){return this.vestToHive(this.amountVests)},amountHiveWeekly:function(){return(this.amountHive/13).toFixed(3)},disableUnstake:function(){return"0.000000 VESTS"!==this.account.vesting_withdraw_rate}},methods:{setUsername:function(e){this.toAccount=e},delegateHive:function(){this.$store.commit("hive/addToQueue",[this.username,"active",["delegate_vesting_shares",{delegator:this.username,delegatee:this.to,vesting_shares:parseFloat(this.amountVests).toFixed(6)+" VESTS"}]])},vestToHive:function(e){return this.globalProps?this.$hive.formatter.vestToHive(e,this.globalProps.total_vesting_shares,this.globalProps.total_vesting_fund_hive).toFixed(3):null},tidyNumber:function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},timeDelta:function(e){var t=o.a.utc(),a=o.a.utc(e),n=a.diff(t,"minutes");return o.a.duration(n,"minutes").humanize(!0)},cancelPowerdown:function(){this.unstakeHive("0.000")},unstakeHive:function(){this.$store.commit("hive/addToQueue",[this.username,"active",["withdraw_vesting",{account:this.username,vesting_shares:this.amountVests.toFixed(6)+" VESTS"}]])}},mounted:function(){this.globalProps.empty&&this.$store.dispatch("hive/getGlobalProps"),void 0===this.$store.state.hive.accounts[this.username]&&this.$store.dispatch("hive/getAccount",this.username)}},l=r,u=a("2877"),c=a("f09f"),d=a("a370"),m=a("27f9"),h=a("9c40"),v=a("c1d0"),g=a("7f67"),p=a("eebe"),f=a.n(p),b=Object(u["a"])(l,n,i,!1,null,null,null);t["default"]=b.exports;f()(b,"components",{QCard:c["a"],QCardSection:d["a"],QInput:m["a"],QBtn:h["a"],QSlider:v["a"]}),f()(b,"directives",{ClosePopup:g["a"]})}}]);