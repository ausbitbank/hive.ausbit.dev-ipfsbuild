(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[31],{"4a34":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-expansion-item",{attrs:{dense:"","dense-toggle":"","expand-separator":"",icon:"redeem","header-class":"text-primary",label:e.heading,title:"Click to view full delegation information"}},[i("q-scroll-area",{staticStyle:{height:"400px"}},[i("q-list",{attrs:{dense:""}},[e._l(e.delegations,(function(t){return i("q-item",{key:t.id,attrs:{label:"Delegations"}},[i("q-item-section",{staticClass:"gt-xs",attrs:{avatar:""}},[i("router-link",{attrs:{to:e.returnAccountLink(t.delegatee)}},[i("q-avatar",{attrs:{size:"sm"}},[i("q-img",{attrs:{src:e.getHiveAvatarUrl(t.delegatee)}})],1)],1)],1),i("q-item-section",[i("router-link",{attrs:{to:e.returnAccountLink(t.delegatee)}},[e._v(e._s(t.delegatee))])],1),i("q-item-section",[e._v("\n        "+e._s(e.tidyNumber(e.vestToHive(t.vesting_shares)))+" "+e._s(e.token)+"\n      ")]),i("q-item-section",[e._v("\n        "+e._s(e.timeDelta(t.min_delegation_time))+"\n      ")]),e.username===e.loggedInUser?i("q-item-section",[i("q-btn",{attrs:{flat:"",color:"orange",icon:"edit",title:"Modify delegation"},on:{click:function(i){e.to=t.delegatee,e.amountVests=parseFloat(t.vesting_shares.split(" ")[0]),e.delegationDialogVisible=!0}}})],1):e._e()],1)})),i("q-item",[i("q-item-section",[e.delegations.length>99?i("q-btn",{attrs:{flat:"",icon:"search",label:"Show more delegators",color:"primary",disable:e.loadMoreButtonDisabled},on:{click:function(t){return e.getDelegations()}}}):e._e(),i("q-btn",{attrs:{disable:e.loggedInUser!==e.username,icon:"add",color:"primary",flat:"",label:"Delegate your Hive Power"},on:{click:function(t){e.to="",e.amountVests=0,e.delegationDialogVisible=!0}}})],1)],1)],2),i("q-dialog",{model:{value:e.delegationDialogVisible,callback:function(t){e.delegationDialogVisible=t},expression:"delegationDialogVisible"}},[i("delegationDialog",{attrs:{username:e.username,toModify:e.to,delegations:e.delegations,tokenName:"HIVE",amountVestsSuggest:e.amountVests}})],1)],1)],1)},a=[],o=(i("28a5"),i("06db"),i("6b54"),i("a481"),i("c1df")),s=i.n(o),l={name:"delegations",props:["username"],data:function(){return{delegations:[],error:null,token:"HP",to:"",loadMoreButtonDisabled:!1,delegationDialogVisible:!1,amountVests:null}},components:{delegationDialog:function(){return Promise.all([i.e(0),i.e(9)]).then(i.bind(null,"3d4c"))}},computed:{globalProps:function(){return this.$store.state.hive.globalProps},loggedInUser:function(){return this.$store.state.hive.user.username},account:function(){return this.$store.state.hive.accounts[this.username]},heading:function(){var e="";return"0.000000"!==this.account.received_vesting_shares.split(" ")[0]&&(e=", "+this.tidyNumber(this.vestToHive(this.account.received_vesting_shares.split(" ")[0]))+" HP of incoming delegations"),this.delegations&&this.delegations.length>0?this.tidyNumber(this.vestToHive(this.account.delegated_vesting_shares.split(" ")[0]))+" "+this.token+" delegated from "+this.username+e:this.delegations?"No outgoing delegations"+e:"Loading Delegations .."}},methods:{getDelegations:function(){var e=this,t="",i=100;this.delegations.length>0&&(t=this.delegations[this.delegations.length-1].delegatee),this.$hive.api.callAsync("condenser_api.get_vesting_delegations",[this.username,t,i]).then((function(n){(""!==t&1===n.length||n.length<i)&&(e.loadMoreButtonDisabled=!0),""!==t&&n.shift(),e.delegations.push.apply(e.delegations,n)})).error((function(t){e.error=t.cause.data}))},timeDelta:function(e){var t=s.a.utc(),i=s.a.utc(e),n=i.diff(t,"minutes");return s.a.duration(n,"minutes").humanize(!0)},vestToHive:function(e){return this.globalProps?this.$hive.formatter.vestToHive(e,this.globalProps.total_vesting_shares,this.globalProps.total_vesting_fund_hive).toFixed(3):null},getHiveAvatarUrl:function(e){return"https://images.hive.blog/u/"+e+"/avatar"},onlyUnique:function(e,t,i){return i.indexOf(e)===t},tidyNumber:function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},returnAccountLink:function(e){return"/@"+e}},mounted:function(){this.globalProps.empty&&this.$store.dispatch("hive/getGlobalProps"),this.getDelegations()}},r=l,g=i("2877"),u=i("3b73"),c=i("4983"),d=i("1c1c"),h=i("66e5"),m=i("4074"),v=i("cb32"),f=i("068f"),p=i("9c40"),b=i("24e8"),_=i("eebe"),D=i.n(_),q=Object(g["a"])(r,n,a,!1,null,null,null);t["default"]=q.exports;D()(q,"components",{QExpansionItem:u["a"],QScrollArea:c["a"],QList:d["a"],QItem:h["a"],QItemSection:m["a"],QAvatar:v["a"],QImg:f["a"],QBtn:p["a"],QDialog:b["a"]})}}]);