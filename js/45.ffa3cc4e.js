(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[45],{eb94:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{staticClass:"flex"},[n("div",{staticClass:"fit row wrap justify-center items-start content-start"},[null!==t.globalProps&&null!==t.account?n("account-header",{attrs:{globalProps:t.globalProps,account:t.account,showBalances:!1}}):t._e(),t.ti&&t.bi&&t.mi?n("q-card",{staticClass:"q-ma-sm q-pa-sm text-center",staticStyle:{"max-width":"500px"},attrs:{dense:"",flat:"",bordered:""}},[n("span",{staticClass:"q-ma-sm"},[t._v("Viewing Hive-Engine token")]),n("q-input",{attrs:{label:"token",dense:""},model:{value:t.token,callback:function(e){t.token=e},expression:"token"}}),n("q-btn",{attrs:{flat:"",color:"primary",label:"change token"},on:{click:function(e){t.$router.push("/@"+t.username+"/wallet/"+t.token),t.token=t.token,t.init()}}}),n("q-btn",{attrs:{icon:"refresh",color:"green",flat:"",dense:""},on:{click:function(e){return t.init()}}}),n("q-separator"),n("q-card-section",{attrs:{avatar:""}},[n("q-img",{attrs:{src:t.ti.metadata.icon}})],1),n("q-card-section",[n("div",{staticClass:"text-h4"},[t._v(t._s(t.ti.symbol))]),n("span",{staticClass:"text-caption"},[t._v(t._s(t.ti.metadata.desc))]),n("div",[n("a",{attrs:{href:t.ti.metadata.url,target:"_blank"}},[n("q-icon",{attrs:{name:"link"}}),t._v(" "+t._s(t.ti.metadata.url)+" ")],1)])]),n("div",[t._v("Last "),n("q-icon",{attrs:{name:"img:statics/hive.svg",alt:"Hive"}}),t._v(" "+t._s(t.mi.lastPrice))],1),n("div",[t._v("Last $ "+t._s((t.hivePriceUsd*t.mi.lastPrice).toFixed(5)))]),n("div",[t._v("24hr Change: "),n("q-icon",{attrs:{name:parseFloat(t.mi.priceChangePercent.split(" ")[0])>0?"arrow_upward":"arrow_downward",color:parseFloat(t.mi.priceChangePercent.split(" ")[0])>0?"green":"red"}}),t._v(t._s(t.mi.priceChangePercent))],1),n("div",[t._v("Highest Bid "),n("q-icon",{attrs:{name:"img:statics/hive.svg",alt:"Hive"}}),t._v(" "+t._s(t.mi.highestBid))],1),n("div",[t._v("Highest Bid $ "+t._s((this.hivePriceUsd*t.mi.highestBid).toFixed(5)))]),n("div",[t._v("Lowest Ask "),n("q-icon",{attrs:{name:"img:statics/hive.svg",alt:"Hive"}}),t._v(" "+t._s(t.mi.lowestAsk))],1),n("div",[t._v("Lowest Ask $ "+t._s((this.hivePriceUsd*t.mi.lowestAsk).toFixed(5)))]),n("q-separator"),n("q-expansion-item",{attrs:{dense:"",label:"Full token info"}},[n("json-viewer",{attrs:{data:t.ti}})],1),n("q-expansion-item",{attrs:{dense:"",label:"Full Market Info"}},[n("json-viewer",{attrs:{data:t.mi}})],1)],1):t._e(),t.loggedInUser===t.username?n("q-card",{staticClass:"q-ma-sm q-pa-sm",attrs:{dense:"",flat:"",bordered:""}},[n("div",{staticClass:"text-center text-h5"},[t._v("Trade")]),n("q-tabs",{attrs:{dense:"",align:"justify","narrow-indicator":""},model:{value:t.tradeTab,callback:function(e){t.tradeTab=e},expression:"tradeTab"}},[n("q-tab",{attrs:{name:"buy",label:"Buy"}}),n("q-tab",{attrs:{name:"sell",label:"Sell"}})],1),n("q-separator"),n("q-tab-panels",{staticClass:"text-center",attrs:{animated:""},model:{value:t.tradeTab,callback:function(e){t.tradeTab=e},expression:"tradeTab"}},[n("q-tab-panel",{attrs:{name:"buy"}},[n("q-input",{attrs:{label:"Price"},model:{value:t.tradeForm.buy.price,callback:function(e){t.$set(t.tradeForm.buy,"price",t._n(e))},expression:"tradeForm.buy.price"}}),n("q-input",{attrs:{label:"Quantity"},model:{value:t.tradeForm.buy.quantity,callback:function(e){t.$set(t.tradeForm.buy,"quantity",t._n(e))},expression:"tradeForm.buy.quantity"}}),n("q-input",{attrs:{label:"Total",readonly:""},model:{value:t.buyTotal,callback:function(e){t.buyTotal=e},expression:"buyTotal"}}),n("q-btn",{attrs:{color:"primary"},on:{click:function(e){return t.tradeHiveEngine(t.token,"buy",t.tradeForm.buy.quantity,t.tradeForm.buy.price)}}},[t._v("Buy "+t._s(t.token))])],1),n("q-tab-panel",{attrs:{name:"sell"}},[n("q-input",{attrs:{label:"Price"},model:{value:t.tradeForm.sell.price,callback:function(e){t.$set(t.tradeForm.sell,"price",t._n(e))},expression:"tradeForm.sell.price"}}),n("q-input",{attrs:{label:"Quantity"},model:{value:t.tradeForm.sell.quantity,callback:function(e){t.$set(t.tradeForm.sell,"quantity",t._n(e))},expression:"tradeForm.sell.quantity"}}),n("q-input",{attrs:{label:"Total",readonly:""},model:{value:t.sellTotal,callback:function(e){t.sellTotal=e},expression:"sellTotal"}}),n("q-btn",{attrs:{color:"primary"},on:{click:function(e){return t.tradeHiveEngine(t.token,"sell",t.tradeForm.sell.quantity,t.tradeForm.sell.price)}}},[t._v("Sell "+t._s(t.token))])],1)],1),n("div",{staticClass:"text-center"},[null!==t.tokenBalance?n("div",[t._v(t._s(t.token)+" "),n("q-btn",{on:{click:function(e){t.tradeTab="sell",t.tradeForm.sell.quantity=t.tokenBalance.balance,t.tradeForm.sell.price=t.mi.highestBid}}},[t._v(t._s(t.tokenBalance.balance))])],1):t._e(),null!==t.swapHiveBalance?n("div",[n("q-icon",{attrs:{name:"img:statics/hive.svg",title:"Hive"}}),n("q-btn",{on:{click:function(e){t.tradeTab="buy",t.tradeForm.buy.quantity=t.swapHiveBalance.balance,t.tradeForm.buy.price=t.mi.lowestAsk}}},[t._v(t._s(t.swapHiveBalance.balance))])],1):t._e()])],1):t._e(),t.buyBook?n("q-card",{staticClass:"q-ma-sm q-pa-sm",attrs:{dense:"",flat:"",bordered:""}},[n("div",{staticClass:"text-h5 text-center"},[t._v("Buy Orders "),n("q-btn",{attrs:{dense:"",flat:"",icon:"refresh",color:"green"},on:{click:function(e){return t.getHiveEngineOrderBookBuy()}}})],1),n("q-list",{staticClass:"text-center",attrs:{dense:"",separator:""}},[t._l(t.myOrders.buy,(function(e){return n("q-item",{key:e.index,staticClass:"text-bold"},[n("q-item-label",[t._v("\n        "+t._s(e.quantity)+" @ "+t._s(e.price)+"\n        ")]),n("q-item-label",{staticClass:"text-caption",attrs:{caption:""}},[n("q-btn",{attrs:{icon:"clear",dense:"",flat:"",color:"red",title:"Cancel Order"},on:{click:function(n){return t.cancelOrder("buy",e.txId)}}})],1)],1)})),t._l(t.buyBook,(function(e){return n("q-item",{key:e.index,attrs:{clickable:""},on:{click:function(n){t.tradeTab="sell",t.tradeForm.sell.price=e.price}}},[t._v("\n        "+t._s(e.quantity)+" @ "+t._s(e.price)+"\n      ")])}))],2)],1):t._e(),t.sellBook?n("q-card",{staticClass:"q-ma-sm q-pa-sm",attrs:{dense:"",flat:"",bordered:""}},[n("div",{staticClass:"text-h5 text-center"},[t._v("Sell Orders "),n("q-btn",{attrs:{dense:"",flat:"",icon:"refresh",color:"green"},on:{click:function(e){return t.getHiveEngineOrderBookSell()}}})],1),n("q-list",{attrs:{dense:"",separator:""}},[t._l(t.myOrders.sell,(function(e){return n("q-item",{key:e.index,staticClass:"text-bold"},[n("q-item-section",[t._v("\n        "+t._s(e.quantity)+" @ "+t._s(e.price)+"\n        ")]),n("q-item-section",{attrs:{caption:""}},[n("q-btn",{attrs:{icon:"clear",dense:"",flat:"",color:"red",title:"Cancel Order"},on:{click:function(n){return t.cancelOrder("sell",e.txId)}}})],1)],1)})),t._l(t.sellBook,(function(e){return n("q-item",{key:e.index,attrs:{clickable:""},on:{click:function(n){t.tradeTab="buy",t.tradeForm.buy.price=e.price}}},[t._v("\n        "+t._s(e.quantity)+" @ "+t._s(e.price)+"\n      ")])}))],2)],1):t._e(),t.th?n("q-card",{staticClass:"q-ma-sm q-pa-sm",attrs:{dense:"",flat:"",bordered:""}},[n("div",{staticClass:"text-h5 text-center"},[t._v("\n        Trade History\n        "),n("q-btn",{attrs:{dense:"",flat:"",icon:"settings",color:"grey"}},[n("q-popup-proxy",[n("q-card",{staticClass:"q-pa-sm",attrs:{flat:"",bordered:""}},[n("q-input",{attrs:{label:"Trade History Limit"},model:{value:t.thLimit,callback:function(e){t.thLimit=t._n(e)},expression:"thLimit"}})],1)],1)],1),n("q-btn",{attrs:{icon:"refresh",color:"green",flat:"",dense:""},on:{click:function(e){return t.getHiveEngineTradeHistory()}}})],1),n("div",{staticClass:"text-center"},[n("sparkline",{attrs:{width:"250",height:"60"}},[n("sparklineCurve",{attrs:{data:t.sparkline,styles:t.sparklineStyle,spotStyles:t.spotStyle,spotProps:t.spotProps,limit:t.sparkline.length,refLineType:"avg"}})],1)],1),n("q-list",{attrs:{dense:"",separator:""}},t._l(t.th,(function(e){return n("q-item",{key:e.index,attrs:{clickable:""}},[n("q-item-section",[n("q-item-label",[n("router-link",{attrs:{to:t.getAccountLink(e.buyer)}},[t._v(t._s(e.buyer))]),t._v("\n           swapped "),n("q-badge",{attrs:{dense:"",color:"grey"}},[t._v(t._s(e.quantity))]),t._v(" "+t._s(e.symbol)+"\n            for "),n("q-badge",{attrs:{dense:"",color:"grey"}},[t._v(t._s(e.volume))]),n("q-icon",{attrs:{name:"img:statics/hive.svg",alt:"Hive"}}),t._v("\n            from "),n("router-link",{attrs:{to:t.getAccountLink(e.seller)}},[t._v(t._s(e.seller))])],1),n("q-item-label",{attrs:{caption:""}},["sell"===e.type?n("q-icon",{attrs:{name:"arrow_downward",color:"red"}}):n("q-icon",{attrs:{name:"arrow_upward",color:"green"}}),t._v("\n          "+t._s(e.price)+" "),n("q-icon",{attrs:{name:"img:statics/hive.svg",alt:"Hive"}}),t._v(" per "+t._s(e.symbol)+"\n        ")],1),t._e(),t._e()],1)],1)})),1),n("q-expansion-item",{attrs:{label:"Full trade history",dense:""}},[n("json-viewer",{attrs:{data:t.th}})],1)],1):t._e()],1)])},a=[],r=(n("d25f"),n("7514"),n("c1df")),s=n.n(r),o=n("6937"),l=new o("https://api.hive-engine.com/rpc"),c={name:"token",data:function(){return{username:this.$route.params.username,token:this.$route.params.token,ti:null,mi:null,bi:null,th:null,thLimit:20,hivePriceUsd:null,buyBook:null,sellBook:null,tradeTab:"buy",tradeForm:{buy:{price:0,quantity:0,total:0},sell:{price:0,quantity:0,total:0}},myOrders:{buy:null,sell:null},sparklineIndicatorStyle:!1,sparklineStyle:{stroke:"#54a5ff"},spotStyle:{fill:"#54a5ff"},spotProps:{size:2}}},components:{accountHeader:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"6841"))},jsonViewer:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"a00c"))},sparkline:function(){return n.e(0).then(n.bind(null,"e286"))}},computed:{globalProps:function(){return this.$store.state.hive.globalProps},account:{cache:!1,get:function(){return this.$store.state.hive.accounts[this.username]}},loggedInUser:function(){return this.$store.state.hive.user.username},swapHiveBalance:function(){return null===this.bi?null:this.bi.filter((function(t){return"SWAP.HIVE"===t.symbol}))[0]},tokenBalance:function(){var t=this;if(null===this.bi)return null;var e=this.bi.filter((function(e){return e.symbol===t.token}))[0];return void 0!==e?e:null},myTrades:function(){return this.th.filter()},buyTotal:function(){return(this.tradeForm.buy.price*this.tradeForm.buy.quantity).toFixed(5)},sellTotal:function(){return(this.tradeForm.sell.price*this.tradeForm.sell.quantity).toFixed(5)},sparkline:function(){if(this.th){var t=[];return this.th.forEach((function(e){t.push(e.price)})),t}return null}},watch:{},methods:{getHiveEngineTokenInfo:function(){var t=this,e=[this.token];e.length>0&&l.find("tokens","tokens",{symbol:{$in:e}},1e3,0,[]).then((function(e){t.ti=e[0],t.ti.metadata=JSON.parse(t.ti.metadata)})).catch((function(){console.error("Error connecting to Hive-Engine api")}))},getHiveEngineMarketInfo:function(){var t=this,e=[this.token];l.find("market","metrics",{symbol:{$in:e}},1e3,0,[]).then((function(e){t.mi=e[0]})).catch((function(){console.error("Error connecting to Hive-Engine api")}))},getHiveEngineBalanceInfo:function(){var t=this,e=[this.token,"SWAP.HIVE"];l.find("tokens","balances",{account:this.username,symbol:{$in:e}},1e3,0,[]).then((function(e){t.bi=e})).catch((function(){console.error("Error connecting to Hive-Engine api")}))},getHiveEngineTradeHistory:function(){var t=this;l.find("market","tradesHistory",{symbol:this.token},this.thLimit,0,[]).then((function(e){t.th=e})).catch((function(){console.error("Error connecting to Hive-Engine api")}))},getHiveEngineOrderBookBuy:function(){var t=this;l.find("market","buyBook",{symbol:this.token},20,0,[{descending:!0,index:"priceDec"}]).then((function(e){t.buyBook=e})).catch((function(){console.error("Error connecting to Hive-Engine api")}))},getHiveEngineOrderBookSell:function(){var t=this;l.find("market","sellBook",{symbol:this.token},20,0,[{descending:!1,index:"priceDec"}]).then((function(e){t.sellBook=e})).catch((function(){console.error("Error connecting to Hive-Engine api")}))},getMyHiveEngineOrders:function(){var t=this;l.find("market","buyBook",{symbol:this.token,account:this.username},50,0,[{descending:!0,index:"_id"}]).then((function(e){t.myOrders.buy=e})).catch((function(){console.error("Error connecting to Hive-Engine api")})),l.find("market","sellBook",{symbol:this.token,account:this.username},50,0,[{descending:!0,index:"_id"}]).then((function(e){t.myOrders.sell=e})).catch((function(){console.error("Error connecting to Hive-Engine api")}))},getAccountLink:function(t){return"/@"+t},getTxLink:function(t){return"/tx/"+t},getPricesCoingecko:function(){var t=this;this.$axios.get("https://api.coingecko.com/api/v3/simple/price?ids=hive&vs_currencies=usd&include_24hr_change=true").then((function(e){t.hivePriceUsd=e.data.hive.usd}))},timeDelta:function(t){var e=s.a.utc(),n=s.a.utc(t),i=n.diff(e,"minutes");return s.a.duration(i,"minutes").humanize(!0)},tradeHiveEngine:function(t,e,n,i){var a='{ "contractName": "market", "contractAction": "'+e+'", "contractPayload": { "symbol": "'+t+'", "quantity": "'+n+'", "price": "'+i+'" } }',r={required_auths:[this.username],required_posting_auths:[],id:"ssc-mainnet-hive",json:a};this.$store.commit("hive/addToQueue",[this.username,"active",["custom_json",r]])},cancelOrder:function(t,e){var n='{ "contractName": "market", "contractAction": "cancel", "contractPayload": { "type": "'+t+'", "id": "'+e+'" } }',i={required_auths:[this.username],required_posting_auths:[],id:"ssc-mainnet-hive",json:n};this.$store.commit("hive/addToQueue",[this.username,"active",["custom_json",i]])},init:function(){this.getHiveEngineMarketInfo(),this.getHiveEngineTokenInfo(),this.getHiveEngineBalanceInfo(),this.getHiveEngineTradeHistory(),this.getPricesCoingecko(),this.getHiveEngineOrderBookBuy(),this.getHiveEngineOrderBookSell(),this.getMyHiveEngineOrders(),void 0===this.account&&this.$store.dispatch("hive/getAccount",this.username)}},mounted:function(){this.init()},created:function(){}},u=c,d=n("2877"),m=n("9989"),h=n("f09f"),v=n("27f9"),p=n("9c40"),b=n("eb85"),f=n("a370"),g=n("068f"),k=n("0016"),y=n("3b73"),_=n("429bb"),q=n("7460"),x=n("adad"),H=n("823b7"),B=n("1c1c"),E=n("66e5"),w=n("0170"),T=n("4074"),F=n("7cbe"),C=n("58a8"),P=n("eebe"),Q=n.n(P),O=Object(d["a"])(u,i,a,!1,null,null,null);e["default"]=O.exports;Q()(O,"components",{QPage:m["a"],QCard:h["a"],QInput:v["a"],QBtn:p["a"],QSeparator:b["a"],QCardSection:f["a"],QImg:g["a"],QIcon:k["a"],QExpansionItem:y["a"],QTabs:_["a"],QTab:q["a"],QTabPanels:x["a"],QTabPanel:H["a"],QList:B["a"],QItem:E["a"],QItemLabel:w["a"],QItemSection:T["a"],QPopupProxy:F["a"],QBadge:C["a"]})}}]);